---
title: "The Analysis: Does Arm Slot Affect Health?"
format: html
execute:
    echco: false
---

<br>
"Dropping your arm slot saves your elbow." This chart investigates one of the most common debates in pitching: Does throwing "over the top" create more stress than throwing "sidearm"?
<br>

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(readr)
library(ggplot2)
library(ggpubr)
library(plotly)

# 1. LOAD DATA
df <- read_csv("data/pitcher_profiles.csv")

# 2. CREATE METRIC & FILTER
df$torque_efficiency <- df$elbow_varus_moment / df$pitch_speed_mph
plot_data <- df[!is.na(df$arm_slot) & !is.na(df$torque_efficiency), ]

# 3. CREATE THE LABEL
cor_val <- cor(plot_data$arm_slot, plot_data$torque_efficiency)
label_text <- paste("R =", round(cor_val, 2)) 

# 4. PREPARE LABEL POSITION (Top Left Corner)
# We create a tiny dataframe just for the text. This forces Plotly to draw it.
text_data <- data.frame(
  x = min(plot_data$arm_slot), 
  y = max(plot_data$torque_efficiency), 
  label = label_text
)

# 5. PLOT
eff_plot <- ggplot(plot_data, aes(x = arm_slot, y = torque_efficiency)) + 
  
  # Scatter Points
  geom_point(aes(color = torque_efficiency, 
                 text = paste("Pitcher:", user,
                              "<br>Arm Slot:", round(arm_slot, 1), "deg",
                              "<br>Efficiency:", round(torque_efficiency, 2), "Nm/mph",
                              "<br>Raw Velo:", round(pitch_speed_mph, 1), "mph")), 
             alpha = 0.7, size = 3) +
  
  scale_color_gradient(low = "blue", high = "red", name = "Stress Cost") +
  geom_smooth(method = "lm", color = "black", se = TRUE) +
  
  # --- THE FIX: Using geom_text instead of annotate ---
  geom_text(data = text_data, aes(x = x, y = y, label = label),
            color = "black", size = 6, hjust = 0, vjust = 1, fontface = "bold") +
  # ----------------------------------------------------
  
  labs(
    title = "Does Arm Slot Affect Efficiency?",
    subtitle = "Relationship between Arm Slot and Torque Cost per MPH",
    x = "Arm Slot (Degrees)",
    y = "Torque Efficiency (Nm per MPH)"
  ) +
  
  theme_minimal()

# 6. DISPLAY
ggplotly(eff_plot, tooltip = "text")
```
<br>

 By analyzing the relationship between arm angle and torque efficiency, we can see if one style of throwing is inherently safer than another.

### The Variables
X-Axis: Arm Slot (Degrees)

What it is: The angle of the forearm relative to the ground at release.

**How to read it:**

Lower numbers (< 30°): Sidearm or Low-3/4 slot.

Higher numbers (> 50°): Over-the-top or High-3/4 slot.

Y-Axis: Torque Efficiency (Nm per MPH)

What it is: This is a "fairness" metric. Instead of looking at raw stress, we look at Stress Cost per MPH. It answers: "How much torque does this pitcher 'pay' to generate 1 MPH of velocity?"

**Why we use it:** A pitcher throwing 95 mph will naturally have more raw torque than someone throwing 80 mph. By dividing torque by velocity, we can compare the mechanical efficiency of different arm slots on a level playing field.

### How to Read This Graph
The Flat Line (R ≈ 0): You will notice the trend line is almost perfectly horizontal (R = 0.02). This is a critical finding. It indicates zero correlation between arm slot and stress efficiency.

The Scatter: Notice that the red dots (High Stress/Low Efficiency) and blue dots (Low Stress/High Efficiency) are scattered evenly across the graph. You can find "efficient" pitchers at a low arm slot and at a high arm slot.

# The Takeaway
Your arm slot does not determine your injury risk. The data suggests that changing a pitcher's arm slot simply to "reduce stress" is likely ineffective. A sidearmer pays the same "tax" on their elbow as an over-the-top thrower. Stress is determined by velocity and timing (how the hips and trunk sequence), not by the height of the hand at release.

<br>
<br>
